<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RGB</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <style>
        .square {
            height: 70vh;
            width: 50vw;
            /* background: red; */
        }
    </style>
</head>

<body>
    <div class="container d-flex flex-column">
        <div class="square text-center d-flex justify-content-center align-items-center border display-1 m-3"
            id="square"></div>
        <div class="col flex-column" id="colorRange">
            <div>
                <button id="rr" class="btn m-1 btn-danger col-1" onclick="red()">R</button>
                <input class="col-5 p-0" id="rangeRed" type="range" min="0" max="255">
            </div>
            <div>
                <button id="gg" class="btn m-1 btn-success col-1" onclick="green()">G</button>
                <input class="col-5 p-0" id="rangeGreen" type="range" min="0" max="255">
            </div>
            <div>
                <button id="bb" class="btn m-1 btn-primary col-1" onclick="blue()">B</button>
                <input class="col-5 p-0" id="rangeBlue" type="range" min="0" max="255">
            </div>
        </div>
        <div class="btn-group col">
            <!-- <button class="btn btn-warning col-1 m-1" id="add" onclick="add()">+</button> -->
            <button class="btn btn-warning col-1 m-1" id="add">+</button>
            <button class="btn btn-secondary col-1 m-1" id="minus">-</button>
            <!-- <button class="btn btn-info col-1 m-1" id="random" onclick="window.location.reload();">?</button> -->
            <button class="btn btn-info col-1 m-1" id="random">?</button>
        </div>
    </div>
    <script>
        let r = Math.ceil(Math.random() * 255);
        let g = Math.ceil(Math.random() * 255);
        let b = Math.ceil(Math.random() * 255);

        rangeRed.value = r;
        rangeGreen.value = g;
        rangeBlue.value = b;

        let rr = (255 - r).toString(16);
        if (rr.length == 1) rr = "0" + rr;
        let rg = (255 - g).toString(16);
        if (rg.length == 1) rg = "0" + rg;
        let rb = (255 - b).toString(16);
        if (rb.length == 1) rb = "0" + rb;

        // console.log(`${rr},${rg},${rb}`);

        r = r.toString(16).toUpperCase();
        if (r.length == 1) r = "0" + r;
        g = g.toString(16).toUpperCase();
        if (g.length == 1) g = "0" + g;
        b = b.toString(16).toUpperCase();
        if (b.length == 1) b = "0" + b;
        // console.log(`${r},${g},${b}`);

        function red() {
            r = Math.floor(prompt("請輸入紅值：(0~255)", r));
            rr = (255 - r).toString(16);
            if (rr.length == 1) rr = "0" + rr;
            // console.log(r);
            if (r > 255 || r < 0 || isNaN(r)) red();
            else {
                rangeRed.value = r;
                r = r.toString(16).toUpperCase();
                if (r.length == 1) r = "0" + r;
                console.log(r);
                document.getElementById("square").style.backgroundColor = `#${r}${g}${b}`;
                document.getElementById("square").textContent = `#${r}${g}${b}`;
                document.getElementById("square").style.color = `#${rr}${rg}${rb}`;
                // console.log(`${r}${g}${b}`);
            }
            return;
        }

        function green() {
            g = Math.floor(prompt("請輸入綠值：(0~255)", g));
            rg = (255 - g).toString(16);
            if (rg.length == 1) rg = "0" + rg;
            if (g > 255 || g < 0 || isNaN(g)) green();
            else {
                rangeGreen.value = g;
                g = g.toString(16).toUpperCase();
                if (g.length == 1) g = "0" + g;
                document.getElementById("square").style.backgroundColor = `#${r}${g}${b}`;
                document.getElementById("square").textContent = `#${r}${g}${b}`;
                document.getElementById("square").style.color = `#${rr}${rg}${rb}`;
                // console.log(`${r}${g}${b}`);
            }
            return;
        }

        function blue() {
            b = Math.floor(prompt("請輸入藍值：(0~255)", b));
            rb = (255 - b).toString(16);
            if (rb.length == 1) rb = "0" + rb;
            if (b > 255 || b < 0 || isNaN(b)) blue();
            else {
                rangeBlue.value = b;
                b = b.toString(16).toUpperCase();
                if (b.length == 1) b = "0" + b;
                document.getElementById("square").style.backgroundColor = `#${r}${g}${b}`;
                document.getElementById("square").textContent = `#${r}${g}${b}`;
                document.getElementById("square").style.color = `#${rr}${rg}${rb}`;
                // console.log(`${r}${g}${b}`);
            }
            return;
        }
        // console.log(`${r}${g}${b}`);

        function add() {
            r = parseInt(r, 16);
            r++;
            if (r > 255) r = 255;
            rangeRed.value = r;
            rr = (255 - r).toString(16);
            r = r.toString(16).toUpperCase();
            if (rr.length == 1) rr = "0" + rr;
            if (r.length == 1) r = "0" + r;


            g = parseInt(g, 16);
            g++;
            if (g > 255) g = 255;
            rangeGreen.value = g;
            rg = (255 - g).toString(16);
            g = g.toString(16).toUpperCase();
            if (rg.length == 1) rg = "0" + rg;
            if (g.length == 1) g = "0" + g;


            b = parseInt(b, 16);
            b++;
            if (b > 255) b = 255;
            rangeBlue.value = b;
            rb = (255 - b).toString(16);
            b = b.toString(16).toUpperCase();
            if (rb.length == 1) rb = "0" + rb;
            if (b.length == 1) b = "0" + b;

            document.getElementById("square").style.backgroundColor = `#${r}${g}${b}`;
            document.getElementById("square").style.color = `#${rr}${rg}${rb}`;
            document.getElementById("square").textContent = `#${r}${g}${b}`;
            // console.log(`#${r}${g}${b}`);

            return;
        }
        function minus() {
            r = parseInt(r, 16);
            r--;
            if (r < 0) r = 0;
            rangeRed.value = r;
            rr = (255 - r).toString(16);
            r = r.toString(16).toUpperCase();
            if (rr.length == 1) rr = "0" + rr;
            if (r.length == 1) r = "0" + r;


            g = parseInt(g, 16);
            g--;
            if (g < 0) g = 0;
            rangeGreen.value = g;
            rg = (255 - g).toString(16);
            g = g.toString(16).toUpperCase();
            if (rg.length == 1) rg = "0" + rg;
            if (g.length == 1) g = "0" + g;


            b = parseInt(b, 16);
            b--;
            if (b < 0) b = 0;
            rangeBlue.value = b;
            rb = (255 - b).toString(16);
            b = b.toString(16).toUpperCase();
            if (rb.length == 1) rb = "0" + rb;
            if (b.length == 1) b = "0" + b;

            document.getElementById("square").style.backgroundColor = `#${r}${g}${b}`;
            document.getElementById("square").style.color = `#${rr}${rg}${rb}`;
            document.getElementById("square").textContent = `#${r}${g}${b}`;

            return;
        }

        function colorRange() {
            // console.log(r,g,b);
            // r = parseInt(r, 16);
            r = rangeRed.value * 1;
            rr = (255 - r).toString(16);
            r = r.toString(16).toUpperCase();

            // g = parseInt(g, 16);
            g = rangeGreen.value * 1;
            rg = (255 - g).toString(16);
            g = g.toString(16).toUpperCase();

            // b = parseInt(b, 16);
            b = rangeBlue.value * 1;
            rb = (255 - b).toString(16);
            b = b.toString(16).toUpperCase();
            // console.log(r,g,b);
            if (rr.length == 1) rr = "0" + rr;
            if (r.length == 1) r = "0" + r;
            if (rg.length == 1) rg = "0" + rg;
            if (g.length == 1) g = "0" + g;
            if (rb.length == 1) rb = "0" + rb;
            if (b.length == 1) b = "0" + b;


            document.getElementById("square").style.backgroundColor = `#${r}${g}${b}`;

            document.getElementById("square").style.color = `#${rr}${rg}${rb}`;
            // console.log(`#${rr}${rg}${rb}`);

            document.getElementById("square").textContent = `#${r}${g}${b}`;
            // console.log(`#${r}${g}${b}`);


            return;
        }
        let randomC;
        function shuffleColor() {
            randomC = setInterval(() => {
                r = Math.ceil(Math.random() * 255);
                g = Math.ceil(Math.random() * 255);
                b = Math.ceil(Math.random() * 255);

                rangeRed.value = r;
                rangeGreen.value = g;
                rangeBlue.value = b;

                let rr = (255 - r).toString(16);
                if (rr.length == 1) rr = "0" + rr;
                let rg = (255 - g).toString(16);
                if (rg.length == 1) rg = "0" + rg;
                let rb = (255 - b).toString(16);
                if (rb.length == 1) rb = "0" + rb;


                r = r.toString(16).toUpperCase();
                if (r.length == 1) r = "0" + r;
                g = g.toString(16).toUpperCase();
                if (g.length == 1) g = "0" + g;
                b = b.toString(16).toUpperCase();
                if (b.length == 1) b = "0" + b;
                document.getElementById("square").style.backgroundColor = `#${r}${g}${b}`;
                document.getElementById("square").style.color = `#${rr}${rg}${rb}`;
                document.getElementById("square").textContent = `#${r}${g}${b}`;
            }, 50);
        }

        function stopShuffle() {
            clearInterval(randomC);
        }



        document.getElementById("square").style.backgroundColor = `#${r}${g}${b}`;
        document.getElementById("square").style.color = `#${rr}${rg}${rb}`;
        document.getElementById("square").textContent = `#${r}${g}${b}`;

        document.getElementById('rangeRed').addEventListener('input', colorRange);
        document.getElementById('rangeGreen').addEventListener('input', colorRange);
        document.getElementById('rangeBlue').addEventListener('input', colorRange);

        document.getElementById('random').addEventListener('mousedown', shuffleColor);
        document.getElementById('random').addEventListener('mouseup', stopShuffle);
        document.getElementById('random').addEventListener('mouseout', stopShuffle);

        let plus;
        let addB = document.getElementById('add');
        addB.onmousedown = () => {
            plus = setInterval(() => {
                add();
            }, 50);
        };
        addB.onmouseup = () => {
            clearInterval(plus);
        };
        addB.onmouseout = () => {
            clearInterval(plus);
        };

        let mins;
        let minsB = document.getElementById('minus');
        minsB.onmousedown = () => {
            mins = setInterval(() => {
                minus();
            }, 50);
        };
        minsB.onmouseup = () => {
            clearInterval(mins);
        };
        minsB.onmouseout = () => {
            clearInterval(mins);
        };

    </script>


</body>

</html>